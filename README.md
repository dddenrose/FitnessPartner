# Neo - Fitness Partner

![Neo Fitness Partner](/public/homepage.jpg)

## ç›®éŒ„

- [APP ä»‹ç´¹èˆ‡åŠŸèƒ½](#app-ä»‹ç´¹èˆ‡åŠŸèƒ½)
  - [ä¸»è¦åŠŸèƒ½](#ä¸»è¦åŠŸèƒ½)
  - [ä½¿ç”¨æµç¨‹](#ä½¿ç”¨æµç¨‹)
  - [ç•«é¢ä»‹ç´¹](#ç•«é¢ä»‹ç´¹)
- [æŠ€è¡“é¸å‹èˆ‡æ¶æ§‹](#æŠ€è¡“é¸å‹èˆ‡æ¶æ§‹)
  - [å‰ç«¯æŠ€è¡“](#å‰ç«¯æŠ€è¡“)
  - [è³‡æ–™æµæ¶æ§‹](#è³‡æ–™æµæ¶æ§‹)
  - [å„²å­˜æ–¹æ¡ˆ](#å„²å­˜æ–¹æ¡ˆ)
  - [ç¬¬ä¸‰æ–¹æœå‹™æ•´åˆ](#ç¬¬ä¸‰æ–¹æœå‹™æ•´åˆ)
  - [æ¶æ§‹åœ–](#æ¶æ§‹åœ–)
    - [æ‡‰ç”¨æ¶æ§‹ç¸½è¦½](#æ‡‰ç”¨æ¶æ§‹ç¸½è¦½)
    - [è³‡æ–™æµæ¶æ§‹åœ–](#è³‡æ–™æµæ¶æ§‹åœ–)
    - [å…ƒä»¶çµæ§‹åœ–](#å…ƒä»¶çµæ§‹åœ–)
    - [æ•¸æ“šæ¨¡å‹åœ–](#æ•¸æ“šæ¨¡å‹åœ–)

---

## APP ä»‹ç´¹èˆ‡åŠŸèƒ½

Neo Fitness Partner æ˜¯ä¸€æ¬¾å°ˆæ³¨æ–¼å¥èº«å’Œè·‘æ­¥è¨“ç·´çš„ Web æ‡‰ç”¨ç¨‹å¼ï¼Œæä¾›é«˜åº¦å®¢è£½åŒ–çš„é‹å‹•é«”é©—ã€‚ç„¡è«–æ‚¨æ˜¯å¥èº«æ„›å¥½è€…é‚„æ˜¯è·‘æ­¥ç©å®¶ï¼Œéƒ½èƒ½é€éç°¡å–®çš„è¨­å®šï¼Œäº«å—åˆ°å°ˆæ¥­ç´šçš„è¨“ç·´æŒ‡å°å’Œè¨˜éŒ„åŠŸèƒ½ã€‚

### ä¸»è¦åŠŸèƒ½

#### 1. HIIT é«˜å¼·åº¦é–“æ­‡è¨“ç·´

![HIIT è¨“ç·´æ¨¡å¼](/public/hiit.jpg)

- æä¾›è±å¯Œçš„é‹å‹•é …ç›®é¸æ“‡ï¼ˆå¦‚ç™»å±±è€…ã€æ·±è¹²ç­‰ï¼‰
- å¯è‡ªå®šç¾©æ¯çµ„é‹å‹•æ™‚é•·
- è‡ªå®šç¾©çµ„é–“ä¼‘æ¯æ™‚é–“
- å¤šçµ„è¨“ç·´è‡ªå‹•åˆ‡æ›
- é‹å‹•è¨ˆæ™‚å™¨èˆ‡æç¤ºéŸ³

#### 2. è¶…æ…¢è·‘æ¨¡å¼

![è¶…æ…¢è·‘æ¨¡å¼](/public/slow_run.jpg)

- å¯èª¿æ•´æ­¥é » (BPM)
- æ™ºèƒ½ç¯€æ‹å™¨è¼”åŠ©
- ä¸é™åˆ¶æ™‚é–“çš„è‡ªç”±è¨“ç·´æ¨¡å¼
- å¯¦æ™‚ç´¯è¨ˆé‹å‹•æ™‚é–“

#### 3. é‹å‹•å ±è¡¨

- è©³ç´°çš„é‹å‹•æ­·å²è¨˜éŒ„
- ä¸åŒæ™‚é–“ç¶­åº¦çš„æ•¸æ“šåˆ†æï¼ˆæ—¥ã€é€±ã€æœˆã€å¹´ï¼‰
- å¯è¦–åŒ–åœ–è¡¨å±•ç¤ºè¨“ç·´é€²åº¦
- æ”¯æŒæ—¥æœŸç¯„åœç¯©é¸

### ä½¿ç”¨æµç¨‹

1. **è¨ˆåŠƒè¨­å®š**ï¼š
   ![é‹å‹•è¨ˆåŠƒè¨­å®š](/public/workout_plan.jpg)

   - åœ¨ `create-workout-plan` é é¢é¸æ“‡é‹å‹•é¡å‹
   - æ ¹æ“šé¸æ“‡çš„é¡å‹é€²è¡Œè©³ç´°è¨­å®šï¼š
     - HIIT æ¨¡å¼ï¼šé¸æ“‡é‹å‹•é …ç›®ã€è¨­å®šé‹å‹•æ™‚é–“å’Œä¼‘æ¯æ™‚é–“
     - è¶…æ…¢è·‘æ¨¡å¼ï¼šè¨­å®šæ­¥é » (BPM)

2. **é‹å‹•åŸ·è¡Œ**ï¼š

   - HIIT æ¨¡å¼ï¼š
     - é¡¯ç¤ºç•¶å‰é‹å‹•é …ç›®å’Œå€’è¨ˆæ™‚
     - æä¾›æš«åœã€è·³éã€éœéŸ³ã€å®Œæˆç­‰æ§åˆ¶åŠŸèƒ½
     - çµ„é–“è‡ªå‹•åˆ‡æ›ä¼‘æ¯èˆ‡è¨“ç·´
   - è¶…æ…¢è·‘æ¨¡å¼ï¼š
     - é¡¯ç¤ºç¯€æ‹å™¨å’Œç´¯è¨ˆæ™‚é–“
     - æä¾›æš«åœã€ç¯€æ‹å™¨é–‹é—œã€å®Œæˆç­‰æ§åˆ¶åŠŸèƒ½

#### 3. é‹å‹•å ±è¡¨

![é‹å‹•å ±è¡¨](/public/report.jpg)

3. **æˆæœæª¢è¦–**ï¼š
   - é‹å‹•å®Œæˆå¾Œæ•¸æ“šè‡ªå‹•è¨˜éŒ„
   - åœ¨å ±è¡¨é é¢æŸ¥çœ‹æ­·å²è¨“ç·´æ•¸æ“šèˆ‡åˆ†æ

### ç•«é¢ä»‹ç´¹

1. **é¦–é **ï¼šä»‹ç´¹æ‡‰ç”¨åŠŸèƒ½ï¼Œæä¾›å¿«é€Ÿå…¥å£
2. **é‹å‹•è¨ˆåŠƒé **ï¼šè¨­ç½®è¨“ç·´åƒæ•¸çš„ç•Œé¢
3. **é‹å‹•åŸ·è¡Œé **ï¼šæ ¹æ“šä¸åŒæ¨¡å¼é¡¯ç¤ºå°æ‡‰çš„è¨“ç·´ç•Œé¢
4. **å ±è¡¨é **ï¼šå±•ç¤ºæ­·å²æ•¸æ“šå’Œåˆ†æåœ–è¡¨

---

## æŠ€è¡“é¸å‹èˆ‡æ¶æ§‹

### å‰ç«¯æŠ€è¡“

- **æ¡†æ¶**ï¼šNext.js 14 (React)
- **UI åº«**ï¼šAnt Design + å®¢è£½åŒ–æ¨£å¼
- **ç‹€æ…‹ç®¡ç†**ï¼šRedux Toolkit + Redux Persist
- **æ¨£å¼æ–¹æ¡ˆ**ï¼š
  - CSS Modulesï¼ˆä¸»è¦ï¼‰
  - Tailwind CSSï¼ˆè¼”åŠ©ï¼‰
  - Ant Design ä¸»é¡Œç³»çµ±
- **å‹•ç•«æ•ˆæœ**ï¼š
  - React Springï¼ˆèƒŒæ™¯å‹•æ…‹æ•ˆæœï¼‰
  - CSS å‹•ç•«ï¼ˆä»‹é¢éæ¸¡ï¼‰
- **éŸ³æ•ˆè™•ç†**ï¼šWeb Audio API + use-sound

### UI ç³»çµ±èˆ‡è¨­è¨ˆåˆ¶åº¦

Neo æ‡‰ç”¨æ¡ç”¨å®Œæ•´çš„è¨­è¨ˆç³»çµ±ï¼Œç¢ºä¿è¦–è¦ºä¸€è‡´æ€§èˆ‡ç„¡éšœç¤™æ€§ï¼š

#### è¨­è¨ˆ Tokens

- **è‰²å½©ç³»çµ±**ï¼š50-900 åˆ†ç´šè‰²éšï¼Œæ”¯æ´æ·±è‰²/æ·ºè‰²ä¸»é¡Œè‡ªå‹•åˆ‡æ›
- **æ’ç‰ˆç³»çµ±**ï¼šå¾ xs åˆ° 9xl çš„å®Œæ•´å­—è™Ÿå±¤ç´š
- **é–“è·ç³»çµ±**ï¼šåŸºæ–¼ 4px ç¶²æ ¼çš„çµ±ä¸€é–“è·
- **é™°å½±ç³»çµ±**ï¼š4 å€‹ç­‰ç´šçš„æ·±åº¦è¡¨ç¾
- **åœ“è§’ç³»çµ±**ï¼š4 å€‹ç­‰ç´šçš„åœ“è§’å€¼

#### éŸ¿æ‡‰å¼è¨­è¨ˆ

- **æ–·é»**ï¼šMobile (639px)ã€Tablet (1023px)ã€Desktop
- **ç§»å‹•å„ªå…ˆ**ï¼šå¾è¡Œå‹•è¨­å‚™é–‹å§‹è¨­è¨ˆ
- **è‡ªé©æ‡‰å°èˆª**ï¼šæ‰‹æ©Ÿæ¼¢å ¡é¸å–® + æ¡Œé¢æ©«å‘å°èˆª

#### ç„¡éšœç¤™æ€§ (A11y)

- âœ… WCAG AA è‰²å½©å°æ¯”åº¦æ¨™æº–
- âœ… éµç›¤å°èˆªæ”¯æ´ï¼ˆTabã€Enterã€Escapeï¼‰
- âœ… ARIA labels èˆ‡èªç¾©åŒ– HTML
- âœ… ç„¦é»æŒ‡ç¤ºè¦–è¦ºåé¥‹
- âœ… åœ–ç‰‡ alt text èˆ‡åœ–æ¨™ aria-label

#### ä¸»é¡Œç³»çµ±

- æ·±è‰²æ¨¡å¼ï¼ˆé è¨­ï¼‰èˆ‡æ·ºè‰²æ¨¡å¼
- å¹³æ»‘ä¸»é¡Œåˆ‡æ›å‹•ç•«ï¼ˆView Transition APIï¼‰
- ç³»çµ±åå¥½è‡ªå‹•æª¢æ¸¬
- ç”¨æˆ¶åå¥½æŒä¹…åŒ–

#### å¸¸ç”¨ UI çµ„ä»¶

- **Skeleton**ï¼š6 ç¨®é¡å‹çš„åŠ è¼‰å ä½ç¬¦
- **Spinner**ï¼šè¡Œå…§å’Œå…¨å±åŠ è¼‰æŒ‡ç¤ºå™¨
- **EmptyState**ï¼šç„¡è³‡æ–™ç‹€æ…‹æç¤º
- **ErrorState**ï¼šéŒ¯èª¤è™•ç†èˆ‡æ¢å¾©å»ºè­°

#### ç›¸é—œæ–‡æª”

- ğŸ“š [è¨­è¨ˆç³»çµ±æŒ‡å—](./docs/design-system.md)
- ğŸ“š [çµ„ä»¶åº«æ–‡æª”](./docs/component-library.md)
- ğŸ“š [CSS ç­–ç•¥](./docs/css-strategy.md)
- ğŸ“š [æ•ˆèƒ½æŒ‡å—](./docs/performance-guide.md)

### æª”æ¡ˆåˆ†å±¤æ¶æ§‹

#### 1. æ‡‰ç”¨å±¤çµæ§‹

```
/app                    # Next.js æ‡‰ç”¨ç›®éŒ„
  /components           # å…±ç”¨å…ƒä»¶
  /[feature]            # åŠŸèƒ½é é¢ï¼ˆå¦‚ exercise, create-workout-planï¼‰
    /page.tsx           # é é¢å…¥å£
    /components         # åŠŸèƒ½å°ˆå±¬å…ƒä»¶
      /[ComponentName]  # ç¨ç«‹å…ƒä»¶
        /index.tsx      # å…ƒä»¶ä¸»æª”
        /styles.module.css # å…ƒä»¶æ¨£å¼
        /const.ts       # å…ƒä»¶å¸¸æ•¸
  /interface            # TypeScript ä»‹é¢å®šç¾©
  /static               # éœæ…‹è³‡æº

/lib                    # é‚è¼¯å±¤èˆ‡å…±ç”¨åŠŸèƒ½
  /features             # Redux åŠŸèƒ½æ¨¡çµ„ï¼ˆslicesï¼‰
  /hooks                # è‡ªå®šç¾© Hooks
  /utils                # å·¥å…·å‡½æ•¸
```

#### 2. å…ƒä»¶çµæ§‹æ¨™æº–

æ¯å€‹å…ƒä»¶éµå¾ªä¸€è‡´çš„çµæ§‹æ¨¡å¼ï¼š

```
/ComponentName
  /index.tsx           # å…ƒä»¶ä¸»æª”
  /styles.module.css   # å°è£çš„æ¨£å¼
  /const.ts            # å…ƒä»¶ç›¸é—œå¸¸æ•¸ï¼ˆè‹¥éœ€è¦ï¼‰
  /components          # å­å…ƒä»¶ï¼ˆè‹¥éœ€è¦ï¼‰
```

### è³‡æ–™æµæ¶æ§‹

#### Redux è³‡æ–™æµè¨­è¨ˆ

- **åˆ†å±¤è¨­è¨ˆ**ï¼š

  ```
  /lib/features/[domain]/[domain]Slice.ts  # Redux åˆ‡ç‰‡
  /lib/store.ts                           # å…¨å±€ store é…ç½®
  ```

- **Store è¨­è¨ˆ**ï¼š

  - `exercise`: é‹å‹•ç‹€æ…‹ã€è¨ˆæ™‚å™¨ã€é‹å‹•é¡å‹èˆ‡åˆ—è¡¨ç®¡ç†
  - `audio`: éŸ³æ•ˆæ§åˆ¶èˆ‡éœéŸ³ç‹€æ…‹
  - `theme`: ä¸»é¡Œè¨­å®šï¼ˆäº®è‰²/æš—è‰²æ¨¡å¼ï¼‰
  - `userInfo`: ä½¿ç”¨è€…è³‡è¨Šã€è¨­å®šèˆ‡ UI ç‹€æ…‹
  - `firebase`: Firebase é€£æ¥ç‹€æ…‹ç®¡ç†
  - `workoutReport`: é‹å‹•å ±å‘Šèˆ‡çµ±è¨ˆæ•¸æ“š

- **æŒä¹…åŒ–ç­–ç•¥**ï¼š
  ä½¿ç”¨ Redux-Persist é‡å°é—œéµè³‡æ–™å¯¦ç¾æŒä¹…åŒ–ï¼š
  ```typescript
  const exercisePersistConfig = {
    key: "exercise",
    storage,
    whitelist: ["currentExercise", "remainingExercises", "workoutType"],
  };
  ```

#### è³‡æ–™æµç¨‹

1. **ç”¨æˆ¶æ“ä½œ** â†’ è§¸ç™¼ Action
2. **Reducer** â†’ æ›´æ–° State
3. **Selectors** â†’ ä½¿ç”¨ TypeScript é¡å‹å®‰å…¨é¸æ“‡å™¨ç²å–è³‡æ–™
4. **UI æ¸²æŸ“** â†’ åæ˜ æœ€æ–°ç‹€æ…‹

### Hooks æ¶æ§‹èˆ‡é‹ç”¨

#### 1. è‡ªå®šç¾© Hooks åˆ†é¡

- **ç‹€æ…‹é‚è¼¯å°è£**ï¼š

  - `/lib/hooks/timer/useTimerLogic.ts` - è¨ˆæ™‚å™¨æ ¸å¿ƒé‚è¼¯
  - `/lib/hooks/useMetronome.ts` - ç¯€æ‹å™¨åŠŸèƒ½

- **UI åŠŸèƒ½å°è£**ï¼š

  - `/lib/hooks/ui/useMediaQuery.ts` - éŸ¿æ‡‰å¼è¨­è¨ˆæ”¯æ´

- **Redux æ•´åˆ**ï¼š

  - `/lib/hooks/redux/useRedux.ts` - é¡å‹å®‰å…¨çš„ Redux Hooks

  ```typescript
  export const useAppDispatch = useDispatch.withTypes<AppDispatch>();
  export const useAppSelector = useSelector.withTypes<RootState>();
  ```

- **éŸ³æ•ˆè™•ç†**ï¼š

  - `/lib/hooks/audio/useCountdownSound.ts` - å€’æ•¸éŸ³æ•ˆè™•ç†

- **èº«ä»½é©—è­‰**ï¼š
  - `/lib/hooks/auth/useAuth.ts` - Firebase èªè­‰æ•´åˆ

#### 2. Hooks è¨­è¨ˆåŸå‰‡

- **å–®ä¸€è·è²¬**ï¼šæ¯å€‹ Hook å°ˆæ³¨æ–¼è§£æ±ºç‰¹å®šå•é¡Œ
- **å¯é‡ç”¨æ€§**ï¼šè·¨çµ„ä»¶å…±äº«é‚è¼¯
- **é—œæ³¨é»åˆ†é›¢**ï¼šUI é‚è¼¯èˆ‡æ¥­å‹™é‚è¼¯åˆ†é›¢
- **é¡å‹å®‰å…¨**ï¼šå®Œæ•´çš„ TypeScript é¡å‹æ”¯æŒ

ä¾‹å¦‚ï¼Œè¨ˆæ™‚å™¨é‚è¼¯å¯¦ç¾ï¼š

```typescript
/**
 * é‹å‹•è¨ˆæ™‚é‚è¼¯çš„ Hook
 * åªå°ˆæ³¨æ–¼:è¨ˆæ™‚é‚è¼¯(æœ¬åœ°+Redux)ä»¥åŠåˆ‡æ›ä¸‹ä¸€å€‹é‹å‹•çš„æ™‚æ©Ÿé‚è¼¯
 * flow: è¨»å†Štimer => æ¯ç§’è§¸ç™¼è¨ˆæ™‚é‚è¼¯ => æ›´æ–°æœ¬åœ°ç‹€æ…‹ => åœ¨é—œéµç¯€é»æ›´æ–°Redux
 */
export const useTimerLogic = () => {
  // é‚è¼¯å¯¦ç¾...
};
```

### å¸¸æ•¸å®šç¾©æ–¹å¼

æ¡ç”¨æ¨¡çµ„åŒ–çš„å¸¸æ•¸å®šç¾©ç­–ç•¥ï¼š

1. **åŠŸèƒ½æ¨¡çµ„å¸¸æ•¸**ï¼š

   - æ¯å€‹åŠŸèƒ½æ¨¡çµ„çš„å¸¸æ•¸æ”¾åœ¨è©²æ¨¡çµ„ä¸‹çš„ `const.ts` ä¸­

   ```typescript
   // app/create-workout-plan/components/FormContent/const.ts
   export const workoutItems = [
     "ç™»å±±è€…",
     "ä¿¯è‡¥æ’",
     "æ·±è¹²",
     // ...
   ];
   ```

2. **è·¯ç”±æ˜ å°„**ï¼š

   ```typescript
   // app/components/Navigation/const.ts
   export const routerMap = {
     Home: "/",
     "Workout Plan": "/create-workout-plan",
     // ...
   };
   ```

3. **æ¨£å¼è®Šæ•¸**ï¼š
   - ä½¿ç”¨ CSS è‡ªå®šç¾©å±¬æ€§åœ¨ `globals.css` ä¸­å®šç¾©å…¨å±€è®Šæ•¸
   ```css
   :root {
     --color-primary: #202020ff;
     --spacing-md: 1rem;
     /* ... */
   }
   ```

### æ¨£å¼æ¶æ§‹

æ¡ç”¨ CSS Modules ç‚ºä¸»é«”çš„æ··åˆå¼æ¶æ§‹ï¼š

1. **CSS Modules æ ¸å¿ƒåŸå‰‡**ï¼š

   - å…ƒä»¶ç‰¹å®šæ¨£å¼ä½¿ç”¨ `.module.css` æ–‡ä»¶éš”é›¢
   - éŸ¿æ‡‰å¼è¨­è¨ˆé›†æˆåœ¨ CSS Modules ä¸­
   - é€šéé¡åå‘½åå¯¦ç¾æ¨£å¼ç¯„åœéš”é›¢

2. **å…¨å±€è®Šæ•¸ç³»çµ±**ï¼š

   - åœ¨ `globals.css` ä¸­å®šç¾©é¡è‰²ã€é–“è·ã€å­—é«”ç­‰å…¨å±€è®Šæ•¸
   - åœ¨ CSS Modules ä¸­å¼•ç”¨å…¨å±€è®Šæ•¸ï¼Œç¢ºä¿ä¸€è‡´æ€§

3. **Ant Design ä¸»é¡Œæ•´åˆ**ï¼š
   - é€šé ConfigProvider é›†ä¸­é…ç½®ä¸»é¡Œ
   - é‡å°ç‰¹å®šçµ„ä»¶é€šé CSS Modules è¦†å¯«æ¨£å¼

### å„²å­˜æ–¹æ¡ˆ

- **èº«ä»½é©—è­‰**ï¼šFirebase Authentication
- **æ•¸æ“šåº«**ï¼šFirebase Firestore
  - ç”¨æˆ¶è³‡æ–™
  - é‹å‹•è¨˜éŒ„
  - è¨“ç·´å ±å‘Š

### ç¬¬ä¸‰æ–¹æœå‹™æ•´åˆ

- **Firebase**ï¼šèº«ä»½é©—è­‰ã€æ•¸æ“šå„²å­˜
- **Chart.js**ï¼šæ•¸æ“šè¦–è¦ºåŒ–
- **Web Audio API**ï¼šç¯€æ‹å™¨å’Œæç¤ºéŸ³æ•ˆ

### æ¶æ§‹åœ–

ä»¥ä¸‹æ¶æ§‹åœ–å±•ç¤ºäº† Neo Fitness Partner æ‡‰ç”¨çš„æ•´é«”çµæ§‹ã€è³‡æ–™æµã€å…ƒä»¶å±¤æ¬¡å’Œæ•¸æ“šæ¨¡å‹ã€‚

#### æ‡‰ç”¨æ¶æ§‹ç¸½è¦½

ä¸‹åœ–å±•ç¤ºäº†æ•´å€‹æ‡‰ç”¨çš„æ¶æ§‹ï¼ŒåŒ…æ‹¬å‰ç«¯æ¡†æ¶ã€ç‹€æ…‹ç®¡ç†ã€æ•¸æ“šè™•ç†å’ŒåŠŸèƒ½æ¨¡å¡Šä¹‹é–“çš„é—œä¿‚ã€‚

```mermaid
graph TD
    User(ä½¿ç”¨è€…) --> |ä½¿ç”¨| App[Neo Fitness Partner æ‡‰ç”¨]

    subgraph "å‰ç«¯æ¡†æ¶"
        App --> NextJS[Next.js 14]
        NextJS --> React[React å…ƒä»¶]
        NextJS --> Router[Next.js è·¯ç”±]
    end

    subgraph "ç‹€æ…‹ç®¡ç†"
        React --> |ä½¿ç”¨| Redux[Redux Toolkit]
        Redux --> ReduxPersist[Redux Persist]
        Redux --> ExerciseSlice[exercise åˆ‡ç‰‡]
        Redux --> AudioSlice[audio åˆ‡ç‰‡]
        Redux --> ThemeSlice[theme åˆ‡ç‰‡]
        Redux --> UserInfoSlice[userInfo åˆ‡ç‰‡]
        Redux --> WorkoutReportSlice[workoutReport åˆ‡ç‰‡]
        Redux --> FirebaseSlice[firebase åˆ‡ç‰‡]
    end

    subgraph "æ•¸æ“šè™•ç†"
        Redux --> |å­˜å–| Firebase[(Firebase)]
        Firebase --> Authentication[èº«ä»½é©—è­‰]
        Firebase --> Firestore[Firestore æ•¸æ“šåº«]
    end

    subgraph "UI å…ƒä»¶"
        React --> AntDesign[Ant Design]
        React --> CustomComponents[è‡ªå®šç¾©å…ƒä»¶]
        React --> CSSModules[CSS Modules]
        React --> TailwindCSS[Tailwind CSS]
        React --> ReactSpring[React Spring]
    end

    subgraph "åŠŸèƒ½æ¨¡å¡Š"
        App --> HomePage[é¦–é ]
        App --> WorkoutPlanPage[é‹å‹•è¨ˆåŠƒé ]
        App --> ExercisePage[é‹å‹•åŸ·è¡Œé ]
        App --> ReportPage[å ±è¡¨é ]
        App --> LoginPage[ç™»å…¥é ]

        ExercisePage --> HIITMode[HIIT æ¨¡å¼]
        ExercisePage --> SlowRunMode[è¶…æ…¢è·‘æ¨¡å¼]

        HIITMode --> Timer[è¨ˆæ™‚å™¨]
        HIITMode --> ExerciseControls[é‹å‹•æ§åˆ¶]

        SlowRunMode --> Metronome[ç¯€æ‹å™¨]
        SlowRunMode --> RunningControls[è·‘æ­¥æ§åˆ¶]
    end

    subgraph "éŸ³æ•ˆç³»çµ±"
        AudioSlice --> WebAudioAPI[Web Audio API]
        WebAudioAPI --> UseSound[use-sound åº«]
        UseSound --> CountdownSound[å€’è¨ˆæ™‚éŸ³æ•ˆ]
        UseSound --> MetronomeSound[ç¯€æ‹å™¨éŸ³æ•ˆ]
    end

    subgraph "Hooks æ¶æ§‹"
        React --> CustomHooks[è‡ªå®šç¾© Hooks]
        CustomHooks --> TimerHooks[è¨ˆæ™‚å™¨é‚è¼¯]
        CustomHooks --> AudioHooks[éŸ³æ•ˆè™•ç†]
        CustomHooks --> AuthHooks[èªè­‰é‚è¼¯]
        CustomHooks --> UIHooks[UI é‚è¼¯]
        CustomHooks --> ReduxHooks[Redux æ•´åˆ]
    end
```

#### è³‡æ–™æµæ¶æ§‹åœ–

æ­¤åœ–å±•ç¤ºäº†æ‡‰ç”¨ä¸­è³‡æ–™çš„æµå‹•æ–¹å¼ï¼Œå¾ç”¨æˆ¶äº¤äº’åˆ° Redux actionsã€reducersã€store åŠèˆ‡ Firebase çš„äº¤äº’ã€‚

```mermaid
flowchart TB
    User([ä½¿ç”¨è€…]) --> |äº’å‹•| UI[UI å…ƒä»¶]
    UI --> |è§¸ç™¼| Actions[Redux Actions]
    Actions --> |è™•ç†| Reducers[Redux Reducers]
    Reducers --> |æ›´æ–°| Store[Redux Store]
    Store --> |è³‡æ–™è¨‚é–±| UI
    Store --> |æŒä¹…åŒ–| LocalStorage[(Local Storage)]
    LocalStorage --> |æ¢å¾©| Store

    subgraph "ç•°æ­¥æ“ä½œ"
        Actions --> |API è«‹æ±‚| Firebase[(Firebase)]
        Firebase --> |å›å‚³è³‡æ–™| Actions
    end

    subgraph "ç‹€æ…‹ç®¡ç†"
        Store --> ExerciseState[é‹å‹•ç‹€æ…‹]
        Store --> AudioState[éŸ³æ•ˆç‹€æ…‹]
        Store --> ThemeState[ä¸»é¡Œç‹€æ…‹]
        Store --> UserState[ä½¿ç”¨è€…ç‹€æ…‹]
        Store --> ReportState[å ±è¡¨ç‹€æ…‹]
        Store --> FirebaseState[Firebase ç‹€æ…‹]
    end

    subgraph "è‡ªå®šç¾© Hooks"
        UI --> CustomHooks[è‡ªå®šç¾© Hooks]
        CustomHooks --> |ä½¿ç”¨| Store
        CustomHooks --> |æ›´æ–°| Actions
    end
```

#### å…ƒä»¶çµæ§‹åœ–

æ­¤åœ–å±•ç¤ºäº†æ‡‰ç”¨çš„å…ƒä»¶å±¤æ¬¡çµæ§‹å’Œæª”æ¡ˆçµ„ç¹”æ–¹å¼ã€‚

```mermaid
graph TD
    App[App] --> Layout[Layout]
    App --> StoreProvider[StoreProvider]
    Layout --> |è·¯ç”±| Pages[é é¢å…ƒä»¶]
    Layout --> Navigation[å°èˆªå…ƒä»¶]
    Layout --> AuthProvider[èªè­‰æä¾›è€…]
    Layout --> ThemeProvider[ä¸»é¡Œæä¾›è€…]

    subgraph "é é¢çµæ§‹"
        Pages --> HomePage[é¦–é ]
        Pages --> LoginPage[ç™»å…¥é ]
        Pages --> WorkoutPlanPage[é‹å‹•è¨ˆåŠƒé ]
        Pages --> ExercisePage[é‹å‹•åŸ·è¡Œé ]
        Pages --> ReportPage[å ±è¡¨é ]
    end

    subgraph "å…ƒä»¶æª”æ¡ˆçµæ§‹"
        Component[å…ƒä»¶] --> IndexFile["index.tsx (å…ƒä»¶ä¸»æª”)"]
        Component --> StyleFile["styles.module.css (æ¨£å¼)"]
        Component --> ConstFile["const.ts (å¸¸æ•¸å®šç¾©)"]
        Component --> SubComponents["components/ (å­å…ƒä»¶)"]
    end

    subgraph "å·¥ä½œæµé é¢çµ„ä»¶"
        WorkoutPlanPage --> FormContent[è¡¨å–®å…§å®¹]
        WorkoutPlanPage --> FormAction[è¡¨å–®æ“ä½œ]
        WorkoutPlanPage --> SimpleModeSelector[æ¨¡å¼é¸æ“‡å™¨]
        WorkoutPlanPage --> PlanForm[è¨ˆåŠƒè¡¨å–®]
        WorkoutPlanPage --> PopularSet[ç†±é–€çµ„åˆ]

        ExercisePage --> ControlPanel[æ§åˆ¶é¢æ¿]
        ExercisePage --> Exercise[é‹å‹•é¡¯ç¤º]
        ExercisePage --> UnifiedTimer[çµ±ä¸€è¨ˆæ™‚å™¨]
        ExercisePage --> Metronome[ç¯€æ‹å™¨]
        ExercisePage --> ReactSpringBg[èƒŒæ™¯å‹•ç•«]
        ExercisePage --> TimerBg[è¨ˆæ™‚å™¨èƒŒæ™¯]
        ExercisePage --> WorkoutModeSelector[é‹å‹•æ¨¡å¼é¸æ“‡å™¨]
    end
```

#### æ•¸æ“šèˆ‡é‚è¼¯æ¶æ§‹åœ–

æ­¤åœ–å±•ç¤ºäº†ä¸»è¦æ•¸æ“šå¯¦é«”åŠå…¶èˆ‡é‚è¼¯å±¤çš„é—œä¿‚ã€‚

```mermaid
classDiagram
    class User {
        +String uid
        +String email
        +String displayName
        +Object settings
    }

    class WorkoutPlan {
        +String id
        +String userId
        +String workoutType
        +Array exercises
        +Number duration
        +Number restTime
        +Number bpm
    }

    class WorkoutReport {
        +String id
        +String userId
        +Date timestamp
        +String workoutType
        +Number duration
        +Array exercises
        +Object stats
    }

    class Exercise {
        +String id
        +String name
        +Number duration
        +Number rest
    }

    class ExerciseSlice {
        +String workoutType
        +String status
        +WorkoutItem currentExercise
        +WorkoutItem[] remainingExercises
        +WorkoutItem[] completedExercises
        +setWorkoutPlan()
        +startExercise()
        +pauseExercise()
        +finishExercise()
        +moveToNextExercise()
    }

    class AudioSlice {
        +Boolean muted
        +toggleMuted()
        +setMuted()
    }

    class Hooks {
        +useTimerLogic()
        +useMetronome()
        +useCountdownSound()
        +useAuth()
        +useMediaQuery()
    }

    User "1" -- "n" WorkoutPlan : creates
    User "1" -- "n" WorkoutReport : has
    WorkoutPlan "1" -- "n" Exercise : contains
    WorkoutReport "1" -- "n" Exercise : records
    ExerciseSlice -- Exercise : manages
    ExerciseSlice -- WorkoutPlan : configures
    AudioSlice -- Hooks : consumed by
    ExerciseSlice -- Hooks : consumed by
```
